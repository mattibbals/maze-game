(this.webpackJsonpgame=this.webpackJsonpgame||[]).push([[0],[,,,,function(e,t,a){},function(e,t,a){e.exports=a(11)},,,,,function(e,t,a){},function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),i=a(2),o=a.n(i),l=(a(10),a(1)),c=(a(4),function(e,t){function a(e,t,a,r){this.northWall=e,this.eastWall=t,this.southWall=a,this.westWall=r}function r(a){var r={};switch(l[a].dir){case 100:r={x:l[a].x,z:l[a].z+1};break;case 103:r={x:l[a].x,z:l[a].z-1};break;case 101:r={x:l[a].x+1,z:l[a].z};break;case 102:default:r={x:l[a].x-1,z:l[a].z}}if(!(r.x<0||r.x>=e||r.z<0||r.z>=t))return i.some((function(e){return e.x===r.x&&e.z===r.z}))?void l.splice(a,1):(101===l[a].dir&&(l.push({x:r.x,z:r.z,dir:103}),l.push({x:r.x,z:r.z,dir:101}),l.push({x:r.x,z:r.z,dir:102}),n[r.x][r.z].northWall=!1,n[l[a].x][l[a].z].southWall=!1),102===l[a].dir&&(l.push({x:r.x,z:r.z,dir:100}),l.push({x:r.x,z:r.z,dir:101}),l.push({x:r.x,z:r.z,dir:102}),n[r.x][r.z].southWall=!1,n[l[a].x][l[a].z].northWall=!1),103===l[a].dir&&(l.push({x:r.x,z:r.z,dir:100}),l.push({x:r.x,z:r.z,dir:103}),l.push({x:r.x,z:r.z,dir:102}),n[r.x][r.z].eastWall=!1,n[l[a].x][l[a].z].westWall=!1),100===l[a].dir&&(l.push({x:r.x,z:r.z,dir:100}),l.push({x:r.x,z:r.z,dir:103}),l.push({x:r.x,z:r.z,dir:101}),n[r.x][r.z].westWall=!1,n[l[a].x][l[a].z].eastWall=!1),i.push({x:r.x,z:r.z}),l.splice(a,1),n);l.splice(a,1)}for(var n=[],i=[],o=0;o<e;o++)n.push(Array(t)),i.push(Array(t));for(var l=[],c=0;c<e;c++)for(var s=0;s<t;s++)n[c][s]=new a(!0,!0,!0,!0),i[c][s]=!1;var u=Math.floor(Math.random()*e),p=Math.floor(Math.random()*t);i[u][p]=!0,l.push({x:u,z:p,dir:100}),l.push({x:u,z:p,dir:103}),l.push({x:u,z:p,dir:101}),l.push({x:u,z:p,dir:102});do{r(Math.floor(Math.random()*(l.length-1)))}while(l.length>0);return console.log("mazeGrid = ",n),n}),s=function(e,t,a){var r=t.player,i=r.gridX,o=r.gridY,l=r.direction,c=function(e){var t="";return e.eastWall&&(t+="east_wall"),e.westWall&&(t+=" west_wall"),e.northWall&&(t+=" north_wall"),e.southWall&&(t+=" south_wall"),t},s=function(e,t){return e.map((function(e,r){return n.a.createElement("div",{key:r,className:"map_cell ".concat(c(e))},function(e,t){var r;if(i===e&&o===t)switch(l){case 100:r="\u2191";break;case 103:r="\u2193";break;case 101:r="\u2192";break;case 102:r="\u2190"}else a.forEach((function(a){a.x===e&&a.y===t&&(r="\u25a0")}));return n.a.createElement("span",null,r)}(t,r))}))};return n.a.createElement("div",{className:"map_container"},function(e){return e.map((function(e,t){return n.a.createElement("div",{key:t,className:"map_row"},s(e,t))}))}(e))},u=function(e,t){var a=new l.e(1,.5),r=new l.c,n=function(t,n,i){var o=new l.b(a,r);if(o.position.z=1*n,o.position.x=1*t,"n"===i)o.position.z-=.5;else if("e"===i)o.position.x+=.5,o.rotation.y=-Math.PI/2;else if("s"===i)o.position.z+=.5,o.rotation.y=Math.PI;else{if("w"!==i)return!1;o.position.x-=.5,o.rotation.y=Math.PI/2}e.add(o)};t.forEach((function(e,t){e.forEach((function(e,a){e.northWall&&n(a,t,"n"),e.eastWall&&n(a,t,"e"),e.southWall&&n(a,t,"s"),e.westWall&&n(a,t,"w")}))}))},p=function(e,t){var a;37===(a=window.event?e.keyCode:e.which)?t.playerInput.left=1:38===a?t.playerInput.up=1:39===a?t.playerInput.right=1:40===a&&(t.playerInput.down=1)},d=function(e,t){var a;37===(a=window.event?e.keyCode:e.which)?t.playerInput.left=0:38===a?t.playerInput.up=0:39===a?t.playerInput.right=0:40===a&&(t.playerInput.down=0)},h=function(e){var t=e.playerObj,a=e.mazeGrid,r=e.collectables,i=t.player,o=i.gridX,l=i.gridY,c=i.direction;return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{style:{paddingLeft:"200px"}},"PLAYER POSITION (","".concat(o,", ").concat(l),")"),n.a.createElement("div",{style:{paddingLeft:"200px"}},"PLAYER DIRECTION (","".concat(c),")"),n.a.createElement("div",{style:{paddingLeft:"200px"}},"NORTH (",100,")"),n.a.createElement("div",null,n.a.createElement("div",{style:{float:"left",paddingTop:"150px"}},"WEST (",102,")"),n.a.createElement("div",{style:{float:"left"}},s(a,t,r)),n.a.createElement("div",{style:{float:"left",paddingTop:"150px"}},"EAST (",101,")")),n.a.createElement("div",{style:{clear:"both",paddingLeft:"200px"}},"SOUTH (",103,")"))},f=new l.g,y=function(e){var t=c(20,20);return u(e,t),t}(f);var m=function(){var e=n.a.useEffect,t={startX:0,startZ:0,playerDirection:100,playerState:1,currentDirection:0,player:{gridX:0,gridY:0,direction:100},turningArc:0,walkingDistance:0,last_update:Date.now(),playerInput:{right:0,left:0,up:0,down:0}};return e((function(){var e=document.getElementById("mazeCanvas"),a=document.getElementById("overHeadView"),r=new l.h({canvas:e});t.camera=new l.d(75,e.width/e.height,.1,1e3);var i=function(e,t){for(var a=new l.a(.25,.25,.25),r=new l.c({color:136}),n=e,i=0,o=[],c=t[0].length,s=t.length,u=0;u<e;u++){for(var p,d,h=!1;!h;)p=Math.floor(Math.random()*c),d=Math.floor(Math.random()*s),h=!0,o.forEach((function(e){e.x==p&&e.y==d&&(h=!1)}));o.push({x:p,y:d,action:function(){i++,alert("You have picked up "+i+" out of "+n+" collectables"),i==n&&alert("Congratulations! You won the game! Refresh the page to play again.")},obj:new l.b(a,r)})}return o}(5,y);!function(e,t){t.forEach((function(t){var a=t.obj;a.position.z=t.x,a.position.x=t.y,e.add(a)}))}(f,i),window.addEventListener("keydown",(function(e){p(e,t)}),!1),window.addEventListener("keyup",(function(e){d(e,t)}),!1);var c=new l.f;c.position.set(0,0,0),f.add(c);return function e(){requestAnimationFrame(e);var l=Date.now(),s=l-t.last_update;t.last_update=l,function(e,t,a,r,n){if(1===t.playerState)if(1===t.playerInput.left){switch(t.playerState=3,t.playerDirection){case 100:t.playerDirection=102;break;case 101:t.playerDirection=100;break;case 103:t.playerDirection=101;break;case 102:default:t.playerDirection=103}t.player.direction=t.playerDirection}else if(1===t.playerInput.right){switch(t.playerState=2,t.playerDirection){case 100:t.playerDirection=101;break;case 101:t.playerDirection=103;break;case 103:t.playerDirection=102;break;case 102:default:t.playerDirection=100}t.player.direction=t.playerDirection}else if(t.playerInput.up&&function(e,t,a,r){return 100===r?!e[t][a].northWall:101===r?!e[t][a].eastWall:103===r?!e[t][a].southWall:102===r&&!e[t][a].westWall}(e,t.player.gridX,t.player.gridY,t.player.direction))switch(t.walkingDistance=0,t.startX=t.camera.position.x,t.startZ=t.camera.position.z,t.playerState=4,t.playerDirection){case 100:t.player.gridX--;break;case 101:t.player.gridY++;break;case 103:t.player.gridX++;break;case 102:default:t.player.gridY--}if(3===t.playerState&&(t.turningArc+=Math.PI/2*a/1e3,t.turningArc>=Math.PI/2&&(t.turningArc=Math.PI/2,t.currentDirection=t.currentDirection+t.turningArc,t.turningArc=0,t.playerState=1),t.camera.rotation.y=t.currentDirection+t.turningArc),2===t.playerState&&(t.turningArc+=Math.PI/2*a/1e3,t.turningArc>=Math.PI/2&&(t.turningArc=Math.PI/2,t.currentDirection=t.currentDirection-t.turningArc,t.turningArc=0,t.playerState=1),t.camera.rotation.y=t.currentDirection-t.turningArc),4===t.playerState)switch(t.walkingDistance+=1*a/1e3,t.walkingDistance>=1&&(t.walkingDistance=1,t.playerState=1,function(e,t,a,r){a.forEach((function(n,i){n.x==e&&n.y==t&&(n.action(),r.remove(n.obj),a.splice(i,1))}))}(t.player.gridX,t.player.gridY,r,n)),t.playerDirection){case 100:t.camera.position.z=t.startZ-t.walkingDistance;break;case 101:t.camera.position.x=t.startX+t.walkingDistance;break;case 103:t.camera.position.z=t.startZ+t.walkingDistance;break;case 102:default:t.camera.position.x=t.startX-t.walkingDistance}}(y,t,s,i,f),c.position.x=t.camera.position.x,c.position.y=t.camera.position.y,c.position.z=t.camera.position.z,function(e,t){e.forEach((function(e){var a=e.obj;a.rotation.x+=2*t/1e3,a.rotation.y+=2*t/1e3}))}(i,s),o.a.render(n.a.createElement(h,{mazeGrid:y,playerObj:t,collectables:i}),a),r.render(f,t.camera)}(),function(){window.removeEventListener("keydown",(function(e){p(e,t)}),!1),window.removeEventListener("keyup",(function(e){d(e,t)}),!1)}})),n.a.createElement(n.a.Fragment,null,n.a.createElement("canvas",{id:"mazeCanvas",width:"600",height:"450"}),n.a.createElement("div",{id:"overHeadView"}))};var w=function(){return n.a.createElement("div",{className:"App"},n.a.createElement(m,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(w,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[5,1,2]]]);
//# sourceMappingURL=main.c9d05b42.chunk.js.map